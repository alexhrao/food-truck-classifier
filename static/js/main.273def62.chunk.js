(this["webpackJsonpfood-truck-classifier"]=this["webpackJsonpfood-truck-classifier"]||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},17:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=a(6),o=a.n(u),c=(a(17),a(1)),l=a.n(c),i=a(2),s=a(7),p=a(8),m=a(10),g=a(9),f=a(11),b=(a(19),a(4),function(e){for(var t=e.groupName,a=e.value,n=e.labels,u=e.onChange,o=n.map((function(e,n){return r.a.createElement("label",{key:e},r.a.createElement("input",{type:"radio",key:e,tabIndex:n,name:t,checked:a===e,onChange:function(){u(e)}}),e)})),c=[],l=[],i=0;i<o.length;i+=2)c.push(o[i]),l.push(o[i+1]);return r.a.createElement("div",{className:"label-group"},r.a.createElement("p",{className:"group-title"},t),r.a.createElement("div",{className:"group-labels"},r.a.createElement("div",{className:"left-labels"},c),r.a.createElement("div",{className:"right-labels"},l)))}),v=a(3),d=function(e){var t=e.groupName,a=e.labels,n=e.value,u=e.onChange,o=a.map((function(e){return r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",key:e,checked:n.includes(e),onChange:function(){var t;t=n.includes(e)?n.filter((function(t){return t!==e})):[].concat(Object(v.a)(n),[e]),u(t)}}),e)}));return r.a.createElement("div",{className:"label-group"},r.a.createElement("p",{className:"group-title"},t),r.a.createElement("div",{className:"group-labels"},o))},h=function(e){var t,a=e.groupName,n=e.range,u=e.value,o=e.onChange;return t=n[1]<n[0]?"Enter a number at or above ".concat(n[0]):"Enter a number between ".concat(n[0]," and ").concat(n[1],", inclusive"),r.a.createElement("div",{className:"label-group"},r.a.createElement("p",{title:t,className:"group-title"},a),r.a.createElement("div",{className:"group-labels"},r.a.createElement("input",{title:t,type:"number",value:u,min:n[0],max:n[1]<n[0]?void 0:n[1],onChange:function(e){return o(""===e.target.value?void 0:parseInt(e.target.value))}})))},N=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/labels").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return"multiple"!==e.groupType&&"single"!==e.groupType||(e.labels.sort(),e.labels.includes("none")&&(e.labels=["none"].concat(Object(v.a)(e.labels.filter((function(e){return"none"!==e})))))),e}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/images/").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/images/".concat(t.bucket,"/").concat(t.key),{body:JSON.stringify(t.labels),method:"PUT"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(g.a)(t).call(this,e))).commitChanges=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({imageDocument:void 0}),e.abrupt("return",E(t).then((function(){y().then((function(e){return a.setState({imageDocument:e})}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={},y().then((function(e){return a.setState({imageDocument:e})})),N().then((function(e){return a.setState({labelGroups:e})})),window.onkeypress=function(e){if("Enter"===e.key){var t=a.state.imageDocument;if(void 0===t)return;a.commitChanges(t)}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.labelGroups,n=t.imageDocument;if(void 0===a||void 0===n)return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"Loading..."));var u=a.map((function(t){var a=n.labels.findIndex((function(e){return e.groupName===t.groupName}));if("multiple"===t.groupType){var u=-1!==a?n.labels[a].value:[];return r.a.createElement(d,{key:t.groupName,groupName:t.groupName,labels:t.labels,onChange:function(a){var r=n.labels.findIndex((function(e){return e.groupName===t.groupName}));-1===r?n.labels.push({groupName:t.groupName,groupId:t.groupId,groupType:"multiple",value:a}):n.labels[r].value=a,e.setState({imageDocument:n})},value:u})}return"single"===t.groupType?r.a.createElement(b,{key:t.groupName,groupName:t.groupName,labels:t.labels,onChange:function(a){var r=n.labels.findIndex((function(e){return e.groupName===t.groupName}));-1===r?n.labels.push({groupName:t.groupName,groupId:t.groupId,groupType:"single",value:a}):n.labels[r].value=a,e.setState({imageDocument:n})},value:-1!==a?n.labels[a].value:void 0}):"numeric"===t.groupType?r.a.createElement(h,{key:t.groupName,groupName:t.groupName,range:t.range,onChange:function(r){var u=n.labels.findIndex((function(e){return e.groupName===t.groupName}));void 0===r?-1!==u&&(n.labels=n.labels.filter((function(e,t){return t!==a}))):-1===u?n.labels.push({groupName:t.groupName,groupId:t.groupId,groupType:"numeric",value:r}):n.labels[u].value=r,e.setState({imageDocument:n})},value:-1!==a?n.labels[a].value:void 0}):null}));return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,n.filename),r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:"https://food-truck-spy.appspot.com/api/snapshots/".concat(n.bucket,"/").concat(n.key),alt:"Classify"})),r.a.createElement("div",{className:"label-container"},r.a.createElement("div",{className:"label-groups"},u),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{type:"button",onClick:function(){return e.commitChanges(n)}},"Commit Changes"),r.a.createElement("button",{type:"button",onClick:function(){n.labels=[],e.commitChanges(n)}},"Mark as Invalid"))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(e,t,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.273def62.chunk.js.map