(this["webpackJsonpfood-truck-classifier"]=this["webpackJsonpfood-truck-classifier"]||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},17:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),u=a.n(o),c=(a(17),a(6)),l=a(7),i=a(10),s=a(8),p=a(11),m=(a(18),a(3),function(e){var t=e.groupName,a=e.value,n=e.labels,o=e.onChange,u=n.map((function(e){return r.a.createElement("label",null,r.a.createElement("input",{type:"radio",key:e,name:t,checked:a===e,onChange:function(){o(e)}}),e)}));return r.a.createElement("div",{className:"label-group"},r.a.createElement("p",{className:"group-title"},t),r.a.createElement("div",{className:"group-labels"},u))}),f=a(9),g=function(e){var t=e.groupName,a=e.labels,n=e.value,o=e.onChange,u=a.map((function(e){return r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",key:e,checked:n.includes(e),onChange:function(){var t;t=n.includes(e)?n.filter((function(t){return t!==e})):[].concat(Object(f.a)(n),[e]),o(t)}}),e)}));return r.a.createElement("div",{className:"label-group"},r.a.createElement("p",{className:"group-title"},t),r.a.createElement("div",{className:"group-labels"},u))},b=function(e){var t,a=e.groupName,n=e.range,o=e.value,u=e.onChange;return t=n[1]<n[0]?"Enter a number at or above ".concat(n[0]):"Enter a number between ".concat(n[0]," and ").concat(n[1],", inclusive"),r.a.createElement("div",{className:"label-group"},r.a.createElement("p",{title:t,className:"group-title"},a),r.a.createElement("div",{className:"group-labels"},r.a.createElement("input",{title:t,type:"number",value:o,min:n[0],max:n[1]<n[0]?void 0:n[1],onChange:function(e){return u(""===e.target.value?void 0:parseInt(e.target.value))}})))},v=a(1),d=a.n(v),h=a(2),N=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/labels").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/images/").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.valid){e.next=2;break}return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/images/".concat(t.bucket,"/").concat(t.key),{body:JSON.stringify([]),method:"PUT"}));case 2:return e.abrupt("return",fetch("https://food-truck-spy.appspot.com/api/images/".concat(t.bucket,"/").concat(t.key),{body:JSON.stringify(t.labels),method:"PUT"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},y().then((function(e){e.valid=!0,a.setState({imageDocument:e})})),N().then((function(e){return a.setState({labelGroups:e})})),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.labelGroups,n=t.imageDocument;if(void 0===a||void 0===n)return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"Loading..."));var o=a.map((function(t){var a=n.labels.findIndex((function(e){return e.groupName===t.groupName}));if("multiple"===t.groupType){var o=-1!==a?n.labels[a].value:[];return r.a.createElement(g,{key:t.groupName,groupName:t.groupName,labels:t.labels,onChange:function(a){var r=n.labels.findIndex((function(e){return e.groupName===t.groupName}));-1===r?n.labels.push({groupName:t.groupName,groupType:"multiple",value:a}):n.labels[r].value=a,e.setState({imageDocument:n})},value:o})}return"single"===t.groupType?r.a.createElement(m,{key:t.groupName,groupName:t.groupName,labels:t.labels,onChange:function(a){var r=n.labels.findIndex((function(e){return e.groupName===t.groupName}));-1===r?n.labels.push({groupName:t.groupName,groupType:"single",value:a}):n.labels[r].value=a,e.setState({imageDocument:n})},value:-1!==a?n.labels[a].value:void 0}):"numeric"===t.groupType?r.a.createElement(b,{key:t.groupName,groupName:t.groupName,range:t.range,onChange:function(r){var o=n.labels.findIndex((function(e){return e.groupName===t.groupName}));void 0===r?-1!==o&&(n.labels=n.labels.filter((function(e,t){return t!==a}))):-1===o?n.labels.push({groupName:t.groupName,groupType:"numeric",value:r}):n.labels[o].value=r,e.setState({imageDocument:n})},value:-1!==a?n.labels[a].value:void 0}):null}));return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,n.filename),r.a.createElement("img",{src:"https://food-truck-spy.appspot.com/api/snapshots/".concat(n.bucket,"/").concat(n.key),alt:"Classify"}),r.a.createElement("button",{type:"button",className:"invalidate",onClick:function(){window.confirm("Are you sure you wish to invalidate this photo? It will be deleted from the datastore. This cannot be undone!")&&(e.setState({imageDocument:void 0}),n.valid=!1,k(n).then((function(){y().then((function(t){return e.setState({imageDocument:t})}))})))}},"This is invalid!"),r.a.createElement("div",{className:"label-groups"},o),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){e.setState({imageDocument:void 0}),k(n).then((function(){y().then((function(t){return e.setState({imageDocument:t})}))}))}},"Commit Changes"))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},3:function(e,t,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.6732b17c.chunk.js.map